function enableStickyToc(){const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{const id=entry.target.getAttribute('id');if(entry.intersectionRatio>0){if(delay==true){let element=document.querySelector('.sticky-toc li.active')
element.firstChild.classList.remove(textColor);element.classList.remove('active');delay=false;updatePosAndColor();}
let element=document.querySelector(`.sticky-toc li a[href="#${id}"]`)
if(element){element.parentElement.classList.add('active');updatePosAndColor();}}else{if(document.querySelectorAll('.sticky-toc li.active').length==1){delay=true;}else{let element=document.querySelector(`.sticky-toc li a[href="#${id}"]`)
if(element){element.classList.remove(textColor);element.parentElement.classList.remove('active');updatePosAndColor();}}}});});var delay=false;var targetPos=window.innerHeight*0.4
var textColor='text-eureka'
function updatePosAndColor(){let elements=document.querySelectorAll('.sticky-toc li.active')
let len=elements.length
if(len!=0){let firstElement=elements[0]
firstElement.firstChild.classList.add(textColor)
let offset=firstElement.offsetTop-targetPos;if(offset>0){document.querySelector(`.sticky-toc`).style.top=`calc( 8rem - ${offset}px)`}else{document.querySelector(`.sticky-toc`).removeAttribute("style");}
for(let i=1;i<len;i++){elements[i].firstChild.classList.remove(textColor)}}}
document.querySelectorAll('.content h1[id]').forEach((section)=>{observer.observe(section);});document.querySelectorAll('.content h2[id]').forEach((section)=>{observer.observe(section);});document.querySelectorAll('.content h3[id]').forEach((section)=>{observer.observe(section);});document.querySelectorAll('.content h4[id]').forEach((section)=>{observer.observe(section);});document.querySelectorAll('.content h5[id]').forEach((section)=>{observer.observe(section);});document.querySelectorAll('.content h6[id]').forEach((section)=>{observer.observe(section);});}
function enableMasonry(){window.onload=resizeAllGridItems();window.addEventListener("resize",resizeAllGridItems);var imgs=document.getElementsByTagName('img');for(let img of imgs){imgLoad(img,resizeAllGridItems())}}
function imgLoad(img,callback){var timer=setInterval(function(){if(img.complete){resizeAllGridItems()
clearInterval(timer)}},50)}
function resizeGridItem(item){grid=document.getElementsByClassName("masonry")[0];rowHeight=0;rowGap=parseInt(window.getComputedStyle(grid).getPropertyValue('grid-row-gap'));rowSpan=Math.ceil((item.querySelector('.grid-content').getBoundingClientRect().height)/rowGap);item.style.gridRowEnd="span "+rowSpan;}
function resizeAllGridItems(){allItems=document.getElementsByClassName("item");for(x=0;x<allItems.length;x++){resizeGridItem(allItems[x]);}}
function resizeInstance(instance){item=instance.elements[0];resizeGridItem(item);}
function getcolorscheme(){let storageColorScheme=localStorage.getItem("lightDarkMode")
let element=document.getElementById('lightDarkMode');let targetDiv=document.getElementById('lightDarkOptions');let targets=targetDiv.getElementsByTagName('span');let screen=document.getElementById('is-open');element.addEventListener('click',()=>{targetDiv.classList.toggle('hidden')
screen.classList.toggle('hidden')})
for(let target of targets){target.addEventListener('click',()=>{let icon=switchMode(target.innerHTML)
let old_icon=element.firstElementChild.getAttribute("data-icon")
element.firstElementChild.setAttribute("data-icon",icon)
element.firstElementChild.classList.remove('fa-'+old_icon)
element.firstElementChild.classList.add('fa-'+icon)
localStorage.setItem("lightDarkMode",target.innerHTML)
targetDiv.classList.toggle('hidden')
screen.classList.toggle('hidden')})}
screen.addEventListener('click',()=>{targetDiv.classList.toggle('hidden')
screen.classList.toggle('hidden')})}
function switchMode(mode){let icon=''
switch(mode){case 'Light':window.matchMedia("(prefers-color-scheme: dark)").removeEventListener('change',switchDarkMode)
icon='sun'
document.getElementsByTagName('html')[0].classList.remove('dark')
break
case 'Dark':window.matchMedia("(prefers-color-scheme: dark)").removeEventListener('change',switchDarkMode)
icon='moon'
document.getElementsByTagName('html')[0].classList.add('dark')
break
case 'Auto':icon='adjust'
const isDarkMode=window.matchMedia("(prefers-color-scheme: dark)")
switchDarkMode(isDarkMode)
window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change',switchDarkMode)
break}
return icon}
function switchDarkMode(e){if(e.matches){document.getElementsByTagName('html')[0].classList.add('dark')}else{document.getElementsByTagName('html')[0].classList.remove('dark')}}
function switchBurger(){let element=document.getElementById('navbar-btn');let screen=document.getElementById('is-open-mobile');let target=document.getElementById('target');element.addEventListener('click',()=>{target.classList.toggle('hidden');screen.classList.toggle('hidden')})
screen.addEventListener('click',()=>{target.classList.toggle('hidden')
screen.classList.toggle('hidden')})}
function switchLanguage(){let element=document.getElementById('languageMode');let targetDiv=document.getElementById('languageOptions');let targets=targetDiv.getElementsByTagName('a')
let screen=document.getElementById('is-open-lang');element.addEventListener('click',()=>{targetDiv.classList.toggle('hidden');screen.classList.toggle('hidden')})
for(let target of targets){target.addEventListener('click',()=>{targetDiv.classList.toggle('hidden')
screen.classList.toggle('hidden')})}
screen.addEventListener('click',()=>{targetDiv.classList.toggle('hidden')
screen.classList.toggle('hidden')})}
function switchDocToc(){let element=document.getElementById('sidebar-title');let target=document.getElementById('sidebar-toc');element.addEventListener('click',()=>{target.classList.toggle('hidden');element.lastElementChild.classList.toggle('fa-caret-right');element.lastElementChild.classList.toggle('fa-caret-down');})}
function changeSidebarHeight(){let element=document.getElementById('sidebar-title');let target=document.getElementById('sidebar-toc');target.style.setProperty('--height-doc-title',`${element.offsetHeight}px`);}
function switchDocVersion(){let element=document.getElementById('doc-version');let targetDiv=document.getElementById('version-options');let targets=targetDiv.getElementsByTagName('a')
let screen=document.getElementById('switch-canvas');element.addEventListener('click',()=>{targetDiv.classList.toggle('hidden');screen.classList.toggle('hidden');element.lastElementChild.classList.toggle('fa-caret-right');element.lastElementChild.classList.toggle('fa-caret-down');})
for(let target of targets){target.addEventListener('click',()=>{targetDiv.classList.toggle('hidden')
screen.classList.toggle('hidden')})}
screen.addEventListener('click',()=>{targetDiv.classList.toggle('hidden')
screen.classList.toggle('hidden')
element.lastElementChild.classList.toggle('fa-caret-right');element.lastElementChild.classList.toggle('fa-caret-down');})}
function changeValue(elementName,newValue){document.getElementsByName(elementName)[0].value=newValue;window.location.hash="#comment-form";};(function comments(){let comments,form,replyNotice,open;comments=elem('.comments');form=elem('.form');button=elem('.form_toggle');replyNotice=elem('.reply_notice')
open='form_open';let successOutput,errorOutput;successOutput={modalTitle:translations.success.title,modalText:translations.success.text,modalClose:translations.success.close};errorOutput={modalTitle:translations.error.title,modalText:translations.error.text,modalClose:translations.error.close};function feedbackModal(){let body,button,children;body=createEl();pushClass(body,'modal_text');button=createEl();pushClass(button,'btn');pushClass(button,'modal_close');children=[body,button];return children;}
function confirmModal(){let group,button,cancel;group=createEl();pushClass(group,'btn_group');button=createEl();pushClass(button,'btn');pushClass(button,'modal_close')
pushClass(button,'form_close')
cancel=createEl();pushClass(cancel,'modal_close')
pushClass(cancel,'btn_close');pushClass(cancel,'icon');group.appendChild(button);group.appendChild(cancel);return group;}
function handleForm(form){function formValues(){let deadWeight,fields,fieldAreas,obj;fieldAreas=elems('.form_input',form);fields=Array.from(fieldAreas);obj=Object.create(null);deadWeight=['fields','options','[',']','undefined'];fields.map(function(field){let key,value;key=deleteChars(field.name,deadWeight);key=convertToUnderScoreCase(key);value=field.value;obj[key]=value;});return obj;}
(function submitForm(){form.addEventListener('submit',function(event){event.preventDefault();let fields,recaptchaResponse,submit,url;url=[endpoint,'v3/entry',gitProvider,username,repository,branch,'comments'].join('/');fields=formValues();submit=elem('.form_submit',form);recaptchaResponse=elem('[name="g-recaptcha-response"]',form);submit.value=translations.submitted;function formActions(info){showModal(info);submit.value=translations.submit;}
let data={fields:{name:fields.name,email:fields.email,comment:fields.comment,replyID:fields.reply_id,replyName:fields.reply_name,replyThread:fields.reply_thread},options:{slug:fields.slug}};if(staticman.secret){data.options.reCaptcha={};data.options.reCaptcha.siteKey=staticman.siteKey;data.options.reCaptcha.secret=staticman.secret;data["g-recaptcha-response"]=recaptchaResponse.value;}
fetch(url,{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(function(res){if(res.ok){formActions(successOutput);}else{formActions(errorOutput);}}).catch(function(error){formActions(errorOutput);console.error('Error:',error);});});})();function getHiddenFields(){let reply_id,reply_name,reply_thread,reply_to,obj;reply_id=elem('.reply_id',form);reply_name=elem('.reply_name',form);reply_thread=elem('.reply_thread',form);reply_to=elem('.reply_to',form);obj={id:reply_id,name:reply_name,thread:reply_thread,to:reply_to}
return obj;}
function setReplyValues(trigger){let comment,id,name,thread;let reply_fields=getHiddenFields();comment=trigger.parentNode;id=comment.id;name=elem('.comment_name_span',comment);thread=elem('.comment_thread',comment);reply_fields.thread.value=thread.textContent;reply_fields.id.value=id;reply_fields.name.value=name.textContent;reply_fields.to.textContent=name.textContent;}
function resetReplyValues(){let reply_fields;reply_fields=getHiddenFields();const values=Object.entries(reply_fields);for(const[key,element]of values){if(key=='to'){element.textContent='';}else{element.value='';}}}
function toggleForm(action=true){let reply_to,toggle_btn;action=action?pushClass:deleteClass;toggle_btn=elem('.form_toggle');action(form,open);action(toggle_btn,hidden);reply_to=getHiddenFields().to.textContent;isBlank(reply_to)?pushClass(replyNotice,hidden):deleteClass(replyNotice,hidden);}
comments.addEventListener('click',function(event){let confirm,fields,modal,target,obj,formIsEmpty,hiddenValuesEmpty;let isFormCloseBtn,isFormToggleBtn,isModalCloseBtn,isResetFormBtn,isReplyBt;target=event.target;fields=formValues();formIsEmpty=isBlank(fields.name)&&isBlank(fields.comment)&&isBlank(fields.email)?true:false;hiddenValuesEmpty=isBlank(fields.reply_id)?true:false;isFormCloseBtn=containsClass(target,'form_close');isFormToggleBtn=containsClass(target,'form_toggle');isModalCloseBtn=containsClass(target,'modal_close');isResetFormBtn=containsClass(target,'form_reset');isReplyBtn=containsClass(target,'reply_btn');isReplyBtn?setReplyValues(target):false;isReplyBtn||isFormToggleBtn?toggleForm():false;isFormCloseBtn?toggleForm(false):false;if(isFormCloseBtn){form.reset();}
if(isResetFormBtn){if(formIsEmpty){hiddenValuesEmpty?false:resetReplyValues();toggleForm(false);}else{obj={modalTitle:translations.discard.title,modalClose:translations.discard.button}
confirm=confirmModal();createModal(confirm,comments);fillModal(obj);}}
if(isModalCloseBtn){modal=target.closest('.modal');modal.remove();deleteClass(doc,'modal_show');}});}
form?handleForm(form):false;function showModal(obj){let feedbackBody;feedback=feedbackModal();createModal(feedback,comments);fillModal(obj);}})();(function makeExternalLinks(){let links=elems('a');if(links){Array.from(links).forEach(function(link){let target,rel,blank,noopener,attr1,attr2,url,isExternal;url=elemAttribute(link,'href');isExternal=(url&&typeof url=='string'&&url.startsWith('http'))&&!url.startsWith(parentURL)?true:false;if(isExternal){target='target';rel='rel';blank='_blank';noopener='noopener';attr1=elemAttribute(link,target);attr2=elemAttribute(link,noopener);attr1?false:elemAttribute(link,target,blank);attr2?false:elemAttribute(link,rel,noopener);}});}})();let headingNodes=[],results,link,icon,current,id,tags=['h2','h3','h4','h5','h6'];current=document.URL;tags.forEach(function(tag){results=document.getElementsByTagName(tag);Array.prototype.push.apply(headingNodes,results);});headingNodes.forEach(function(node){link=createEl('a');icon=createEl('img');icon.src='{{ absURL "images/icons/link.svg" }}';link.className='link';link.appendChild(icon);id=node.getAttribute('id');if(id){link.href=`${current}#${id}`;node.appendChild(link);pushClass(node,'link_owner');}});let inlineListItems=elems('ol li');if(inlineListItems){inlineListItems.forEach(function(listItem){let firstChild=listItem.children[0]
let containsHeading=isMatch(firstChild,tags);containsHeading?pushClass(listItem,'align'):false;})}
const copyToClipboard=str=>{let copy,selection,selected;copy=createEl('textarea');copy.value=str;copy.setAttribute('readonly','');copy.style.position='absolute';copy.style.left='-9999px';selection=document.getSelection();doc.appendChild(copy);selected=selection.rangeCount>0?selection.getRangeAt(0):false;copy.select();document.execCommand('copy');doc.removeChild(copy);if(selected){selection.removeAllRanges();selection.addRange(selected);}}
(function copyHeadingLink(){let deeplink,deeplinks,newLink,parent,target;deeplink='link';deeplinks=elems(`.${deeplink}`);if(deeplinks){document.addEventListener('click',function(event)
{target=event.target;parent=target.parentNode;if(target&&containsClass(target,deeplink)||containsClass(parent,deeplink)){event.preventDefault();newLink=target.href!=undefined?target.href:target.parentNode.href;copyToClipboard(newLink);}});}})();(function copyLinkToShare(){let copy,copied,excerpt,isCopyIcon,isInExcerpt,link,postCopy,postLink,target;copy='copy';copied='copy_done';excerpt='excerpt';postLink='post_card';doc.addEventListener('click',function(event){target=event.target;isCopyIcon=containsClass(target,copy);let isWithinCopyIcon=target.closest(`.${copy}`);if(isCopyIcon||isWithinCopyIcon){let icon=isCopyIcon?isCopyIcon:isWithinCopyIcon;isInExcerpt=icon.closest(`.${excerpt}`);if(isInExcerpt){link=target.closest(`.${excerpt}`).previousElementSibling;link=containsClass(link,postLink)?elemAttribute(link,'href'):false;}else{link=window.location.href;}
if(link){copyToClipboard(link);pushClass(icon,copied);}}});})();(function hideAside(){let aside,title,posts;aside=elem('.aside');title=aside?aside.previousElementSibling:null;if(aside&&title.nodeName.toLowerCase()==='h3'){posts=Array.from(aside.children);posts.length<1?title.remove():false;}})();(function goBack(){let backBtn=elem('.btn_back');let history=window.history;if(backBtn){backBtn.addEventListener('click',function(){history.back();});}})();(function postsPager(){const pager=elem('.pagination');if(pager){pushClass(pager,'pager');const pagerItems=elems('li',pager);const pagerLinks=Array.from(pagerItems).map(function(item){return item.firstElementChild;});pagerLinks.forEach(function(link){pushClass(link,'pager_link')});pagerItems.forEach(function(item){pushClass(item,'pager_item')});}})();(function lazy(){function lazyLoadMedia(element){let mediaItems=elems(element);if(mediaItems){Array.from(mediaItems).forEach(function(item,index){item.loading="lazy";});}}
lazyLoadMedia('iframe');lazyLoadMedia('img');})();doc.addEventListener('click',function(event){const target=event.target;const cryptoCopy='.crypto_copy';const copied='active';let isCopyCrypto=target.matches(cryptoCopy);const isInCopyCrypto=target.closest(cryptoCopy);if(isCopyCrypto||isInCopyCrypto){if(isInCopyCrypto){isCopyCrypto=isInCopyCrypto;}
const address=isCopyCrypto.previousElementSibling.dataset.address;copyToClipboard(address);pushClass(isCopyCrypto,copied);}});